{{!-- TODO
1. Implement navbar for all handlebar files and update routes for same if current dont work.  
2. MOVE THE SCRIPT FROM THIS PAGE TO JS FOLDER
--}}

<link rel="stylesheet" href="/public/css/potentialmatches.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
<!-- Navbar -->
{{!-- {{> navbar}} --}}

{{!-- <link rel="stylesheet" href="/public/css/matches.css"> --}}


<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">Dating App</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item active">
        <a class="nav-link" href="/home/{{userId}}">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/matches/{{userId}}">Matches</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/potentialMatches/{{userId}}?distance=all">Potential Matches</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/profile/{{userId}}">Profile</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/messages/{{userId}}/messages">Messages</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/logout">Logout</a>
      </li>
    </ul>
  </div>
</nav>

<h1>Potential Matches</h1>

<div id="distanceToggleContainer">
  <button class = "potBtn" id="showAllProfilesButton" onclick="showAllProfiles()">Show all profiles</button>
  <button class = "potBtn" id="showWithin5kmButton" onclick="showProfilesWithin5km()">Show profiles within 5km radius only</button>
</div>




<!-- User Card -->
{{!-- {{#if users}}
  <div id="user-card">
    <h2>{{users.[0].name}}</h2>
    <a href="/potentialMatchesProfile/{{users.[0]._id}}">View Profile</a>
    <img src="/{{users.[0].image.destination}}/{{users.[0].image.filename}}" alt="Profile image">
    <p>{{users.[0].bio}}</p>
    <p>A place I want to visit: {{users.[0].bucketlist}}</p>
    {{#if users.[0].u}}
      <p>You both go to {{{users.[0].university}}}</p>
    {{/if}}
    {{#if users.[0].w}}
      <p>You both work at {{{users.[0].work}}}</p>
    {{/if}}
    {{#if users.[0].g}}
      <p>You both workout at {{{users.[0].gym}}}</p>
    {{/if}}

    <form method="POST" action="/potentialMatches/{{users.[0]._id}}/like?distance={{../distance}}">
      <button class = "potBtn" type="submit">Like</button>
    </form>
    <form method="POST" action="/potentialMatches/{{users.[0]._id}}/dislike?distance={{../distance}}">
      <button class = "potBtn" type="submit">Dislike</button>
    </form>
  </div>
{{else}}
  <p>No potential matches found.</p>
{{/if}} --}}

{{!-- {{#if users}}
  <ul>
    {{#each users}}
      <li>
        <h2>{{this.name}}</h2>
        <img src="/{{this.image.destination}}/{{this.image.filename}}" alt="Profile image">
        <p>{{this.bio}}</p>
        <p>A place I want to visit: {{this.bucketlist}}</p>
        <a href="/potentialMatchesProfile/{{this._id}}">View Profile</a>
        {{#if u}}
          <p>You both go to {{{this.university}}}</p>
        {{/if}}
        {{#if w}}
          <p>You both work at {{{this.work}}}</p>
        {{/if}}
        {{#if g}}
          <p>You both workout at {{{this.gym}}}</p>
        {{/if}}

        <form method="POST" action="/potentialMatches/{{this._id}}/like?distance={{../distance}}">
          <button type="submit">Like</button>
        </form>
        <form method="POST" action="/potentialMatches/{{this._id}}/dislike?distance={{../distance}}">
          <button type="submit">Dislike</button>
        </form>
      </li>
    {{/each}}
  </ul>
{{else}}
  <p>No potential matches found.</p>
{{/if}}
<!-- Navigation Buttons -->
<div id="navigation-buttons">
  <button id="previous-button" onclick="showPreviousUser()">Previous</button>
  <button id="next-button" onclick="showNextUser()">Next</button>
</div> --}}

<!-- Script -->

{{#if users}}
  <div id="user-cards">
    {{#each users}}
      <div class="user-card">
        <h2>{{this.name}}</h2>
        <a href="/potentialMatchesProfile/{{this._id}}">View Profile</a>
        <img src="/{{this.image.destination}}/{{this.image.filename}}" alt="Profile image">
        <p>{{this.bio}}</p>
        <p>A place I want to visit: {{this.bucketlist}}</p>
        {{#if this.u}}
          <p>You both go to {{{this.university}}}</p>
        {{/if}}
        {{#if this.w}}
          <p>You both work at {{{this.work}}}</p>
        {{/if}}
        {{#if this.g}}
          <p>You both workout at {{{this.gym}}}</p>
        {{/if}}
        <form id="lik" method="POST" action="/potentialMatches/{{this._id}}/like?distance={{../distance}}">
          <button type="submit" >Like</button>
        </form>
        <form id="dislik" method="POST" action="/potentialMatches/{{this._id}}/dislike?distance={{../distance}}">
          <button type="submit" >Dislike</button>
        </form>
      </div>
    {{/each}}
  </div>
{{else}}
  <p>No potential matches found.</p>
{{/if}}


<script src="/public/js/leftright.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
<script src="/public/js/potentialMatch.js"></script>